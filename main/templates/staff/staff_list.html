{% extends 'base.html' %}
{% block content %}

<style>

    
    .file-upload {
      background-color: #ffffff;
      width: 360px;
      margin: 0 auto;
      padding: 12px;
    }
    .file-upload-btn {
      width: 100%;
      margin: 0;
      color: #fff;
      background: #1FB264;
      border: none;
      padding: 5px;
      border-radius: 4px;
      border-bottom: 4px solid #15824B;
      transition: all .2s ease;
      outline: none;
      text-transform: uppercase;
      font-weight: 500;
    }
    .file-upload-btn:hover {
      background: #1AA059;
      color: #ffffff;
      transition: all .2s ease;
      cursor: pointer;
    }
    .file-upload-btn:active {
      border: 0;
      transition: all .2s ease;
    }

    .file-upload-content {
      display: none;
      text-align: center;
    }
    
    .file-upload-input {
      position: absolute;
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      outline: none;
      opacity: 0;
      cursor: pointer;
    }
    .image-upload-wraps {
      margin-top: 20px;
      border: 1px dashed #1FB264;
      position: relative;
      height: 250px;
      width: 330px;
      align-items: center;
      justify-content: center;
    }
    
    
    
    .image-title-wrap {
      padding: 0 15px 15px 15px;
      color: #222;
    }
    
    .drag-text {
      text-align: center;
      align-items: center;
      justify-content: center;
    }
    .drag-text h3 {
      font-weight: 100;
      text-transform: uppercase;
      color: #15824B;
      padding: 60px 0;
    }
    .file-upload-image {
      height: 200px;
      width: 280px;
      margin: auto;
      padding: 0px;
    }
    .remove-image {
      width: 200px;
      margin: 0;
      color: #fff;
      background: #cd4535;
      border: none;
      padding: 10px;
      border-radius: 4px;
      border-bottom: 4px solid #b02818;
      transition: all .2s ease;
      outline: none;
      text-transform: uppercase;
      font-weight: 700;
    }
    .remove-image:hover {
      background: #c13b2a;
      color: #ffffff;
      transition: all .2s ease;
      cursor: pointer;
    }
    .remove-image:active {
      border: 0;
      transition: all .2s ease;
    }
  </style>

    <script>
        function readURL(input) {
      if (input.files && input.files[0]) {
    
        var reader = new FileReader();
    
        reader.onload = function(e) {
          $('.image-upload-wrap').hide();
    
          $('.file-upload-image').attr('src', e.target.result);
          $('.file-upload-content').show();
    
          $('.image-title').html(input.files[0].name);
        };
    
        reader.readAsDataURL(input.files[0]);
    
      } else {
        removeUpload();
      }
    }
    
    function removeUpload() {
      $('.file-upload-input').replaceWith($('.file-upload-input').clone());
      $('.file-upload-content').hide();
      $('.image-upload-wrap').show();
    }
    $('.image-upload-wrap').bind('dragover', function () {
        $('.image-upload-wrap').addClass('image-dropping');
      });
      $('.image-upload-wrap').bind('dragleave', function () {
        $('.image-upload-wrap').removeClass('image-dropping');
    });
    
    </script>

<!-- start of auto calculator-->

<script type="text/javascript">
$("#lite").change(function(){
calLoan();
});

$("#price").change(function(){
calLoan();
});

function calLoan(){
if ($("#lite").val() == ""){
  return false;
}
else if($("#price").val == "")
{
  return false;
}
else 
{
  var total = 0;
  total = (Number($("#lite").val()) * Number($("#price").val()))
  $("#total").val(total.toFixed(2));

}
}
</script>



<section class="content">
<section class="content-header">
  <h1><i class="fa fa-group text-primary"> Staff</i> </h1>
</section>
<!--Start content-->
<section class="content-header">
<div class="box box-primary mt-2">
    <div class="box-header with-border">
        <h3 class="box-title text-primary"><i class="fa fa-user-plus" aria-hidden="true"></i>   Add Staff</h3>
        <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
        </div>
    </div>
    <!--Start form card -->
    <div class="box-body">
        <!--Start row form-->
        <form action="{{url_for("add_staff")}}" method="POST" enctype="multipart/form-data">
        <div class="row">

            <!--Start column form-->
            <div class="col-md-7">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" class="form-control" placeholder="Full name" name="fullname" maxlength="100" autocomplete="off" required="">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="text" class="form-control" placeholder="Phone Number" name="phone_number" maxlength="100" autocomplete="off" required="">
                        </div>
                        <div class="form-group">
                            <label>Joining Date</label>
                            <input type="date" class="form-control" placeholder="Joining Date" name="joining_date" maxlength="100" autocomplete="off" required=""></input>
                        </div>
                        
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" class="form-control" placeholder="Email" name="email" maxlength="100" autocomplete="off" required="">
                        </div>
                        <div class="form-group">
                            <label>Salary</label>
                            <input type="number" class="form-control" placeholder="Salary" name="salary" maxlength="100" autocomplete="off" required=""></input>
                        </div>
                        <div class="form-group">
                            <label>Resign Date</label>
                            <input type="date" class="form-control" placeholder="Resign Date" name="resign_date" maxlength="100" autocomplete="off" required=""></input>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Address</label>
                    <textarea type="text" class="form-control" placeholder="Address" name="address" maxlength="100" autocomplete="off" required=""></textarea>
                </div>
            </div>
            <!--End column form-->

             <!--Start column form-->
             <div class="col-md-5">
                <!--Start Image -->
                <div class="card">
                    <div class="card-header">
                        <h5>Profile Image</h5>
                    </div>
                    <div class="card-body m-5">

                        <div class="file-upload ">
                            <div class="image-upload-wrap">
                              <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" name="staff_img" required />
                                <div class="drag-text">
                                  <img src="{{url_for("static", filename="img/profile_placeholder.jpg")}}" width="280" height="200 "/>
                                </div>
                            </div>
                            <div class="file-upload-content">
                              <img class="file-upload-image" src="#" alt="your image" width="280" height="180"/>
                              <div class="image-title-wrap">
                              
                              </div>
                            </div>
                            <br>
                            <button class="file-upload-btn" style="margin-left: 30px; width: 280px; height: 35px; text-align: cetner;" type="button" onclick="$('.file-upload-input').trigger( 'click' )">Add Image</button>
                            </div>

                    </div>
                </div>
                <!--End Image -->
                
            </div>
            <!--End column form-->
           
        </div>
        <button type="submit" class="btn btn-primary text-start">Submit</button>

    </form>
        <!--End of Form-->
       
      
    </div>
    <!--End form card-->

</div>
</section>
<!--End Content-->


<!--start staff list contetn-->
<section class="content-header">
    <div class="box box-primary mt-2">
        <div class="box-header with-border">
            <h3 class="box-title text-primary"><i class="fa fa-user text-primary"> Staff List</i></h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
            </div>
        </div>
        <!--Start form card -->
        <div class="box-body">
            <!--Start row form-->
           
            <!--End of Form-->
        
            <h4></h4>
            <div class="box-body table-responsive">
                <table class="table table-hover table-bordered" id="">
                    <thead>
                        <tr>
                          <th>No</th>
                          <th>Image</th>
                          <th>Full Name</th>
                          <th>Email</th>
                          <th>Phone Number</th>
                          <th>Address</th>
                          <th>Salary</th>
                          <th>Action</th>
    
                         
                        </tr>
                    </thead>
                    <tbody>
                       {% for dt in data.items %}
                       <tr>
                        <td style="text-align:center">{{loop.index}}</td>
                        <td><img src="{{url_for("static", filename="/img/"+dt.staff_img)}}" style="width:32px;" /></td>
                        <td class="text-start">{{dt.fullname}}</td>
                        <td class="text-start">{{dt.email}}</td>
                        <td>{{dt.phone_number}}</td>
                        <td class="text-start">{{dt.address}}</td>
                        <td>{{dt.salary}}</td>
                        <td>
                   
                            <button type="button" class="btn btn-default btn-sm btn-warning" data-toggle="modal" data-target="#modal-default{{dt.id}}">
                                Edit
                            </button>
                            <button type="button" class="btn btn-danger btn-default btn-sm" data-toggle="modal" data-target="#modal-danger{{dt.id}}">
                                Delete
                                </button>
                        </td>

                        <!--Start of modal edit -->
                        <div class="modal fade" id="modal-default{{dt.id}}">
                            <div class="modal-dialog">
                            <div class="modal-content">
                            <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title text-primary"><i class="fa fa-user" aria-hidden="true"></i>  Edit Staff</h4>
                          
                            </div>
                            <div class="modal-body">
                            
                                <form action="{{url_for("edit_staff", id=dt.id)}}"  id = "" method="POST">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Full Name</label>
                                                <input type="text" class="form-control" value="{{dt.fullname}}" placeholder="Full name" name="fullname" maxlength="100" autocomplete="off" required="">
                                            </div>
                                            <div class="form-group">
                                                <label>Phone Number</label>
                                                <input type="text" class="form-control" value="{{dt.phone_number}}" placeholder="Phone Number" name="phone_number" maxlength="100" autocomplete="off" required="">
                                            </div>
                                            <div class="form-group">
                                                <label>Joining Date</label>
                                                <input type="date" class="form-control" value="{{dt.joining_date}}" placeholder="Joining Date" name="joining_date" maxlength="100" autocomplete="off" required=""></input>
                                            </div>
                                            
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Email</label>
                                                <input type="text" class="form-control" value="{{dt.email}}" placeholder="Email" name="email" maxlength="100" autocomplete="off" required="">
                                            </div>
                                            <div class="form-group">
                                                <label>Salary</label>
                                                <input type="number" class="form-control" value="{{dt.salary}}" placeholder="Salary" name="salary" maxlength="100" autocomplete="off" required=""></input>
                                            </div>
                                            <div class="form-group">
                                                <label>Resign Date</label>
                                                <input type="date" class="form-control" value="{{dt.resign_date}}" placeholder="Resign Date" name="resign_date" maxlength="100" autocomplete="off" required=""></input>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Address</label>
                                        <textarea type="text" class="form-control" placeholder="Address" name="address" maxlength="100" autocomplete="off" required="">{{dt.address}}</textarea>
                                    </div>


                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save</button>
                            </div>
                            </form>

                         </div>
                            
                        </div>
                        <!--End of modal edit-->

                        <!--start of modal delete -->
                    
                      <div class="modal modal-default fade" id="modal-danger{{dt.id}}">
                        <div class="modal-dialog">
                        <div class="modal-content">
                        <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Danger Modal</h4>
                        </div>
                        <div class="modal-body">
                        <p>One fine body&hellip;</p>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-outline pull-left" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-outline">Save changes</button>
                        </div>
                        </div>
                        
                    </div>
                 
                <!--End of modal delete-->


                    </tr>
                       {% endfor %}
                                               
                    
                    </tbody>
                </table>
            </div>

            <!--Start of row pagination-->

            <div class="row mt-3">
                <div class="col-lg-7">
                    <p style="color:  #4581bd;">showing <b><i>{{data.page}}</i></b> to <b><i>{{data.pages}}</i></b> of <b><i>{{data.pages}}</i></b> entries 
                </div>
                <div class="col-lg-5 justify-content-end">
                    <a  href="{{url_for("staff_list", page=data.prev_num)}}" class="btn btn-primary  btn-sm 
                    {% if data.page == 1 %}disabled{% endif %}
                    ">
                    Prevous
                  </a>
                 {% for page_num  in data.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
                 
                 {% if page_num %}
                    {% if data.page == page_num %}
                       <a href="{{url_for("staff_list", page = page_num)}}" class="btn btn-primary  btn-sm">{{page_num}}</a>
                    {% else %}
                      <a href="{{url_for("staff_list", page = page_num)}}" class="btn btn-primary  btn-sm">{{page_num}}</a>
                    {% endif %}
                 {% else %}
                 ...
                 {% endif %}
                 {% endfor %}
                  <a href="{{url_for("staff_list", page=data.next_num)}}" class="btn btn-primary  btn-sm 
                  {% if data.page == data.pages %}disabled{% endif %} ">
                  Next
                </a>
                  </div>
            </div>
            <!--End of row pagination-->
            
        </div>
        <!--End form card-->
    
    </div>
    </section>
    <!--End Content-->
    
<!--End of staff list-->
</section>

<script>
  $(function () {
    $('#example1').DataTable()
    $('#example2').DataTable({
      'paging'      : true,
      'lengthChange': false,
      'searching'   : false,
      'ordering'    : true,
      'info'        : true,
      'autoWidth'   : false
    })
  });
</script>
{% endblock %}

